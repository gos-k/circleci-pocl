machine:
    environment:
        LISP: sbcl-bin
        PATH: ~/.roswell/bin:$PATH
        CXX: clang++

checkout:
    pre:
        - curl -L https://raw.githubusercontent.com/snmsts/roswell/master/scripts/install-for-ci.sh | sh

dependencies:
    cache_directories:
        - "~/pocl-0.12/"

    pre:
        - pwd
        - echo ${HOME}
        - sudo apt-get install -y pkg-config libltdl3-dev libhwloc-dev llvm-dev clang libclang-dev ocl-icd-opencl-dev libedit-dev
        - if [[ ! -d ~/pocl-0.12/ ]]; then pushd . && cd && wget http://portablecl.org/downloads/pocl-0.12.tar.gz && popd; fi
        - if [[ ! -d ~/pocl-0.12/ ]]; then pushd . && cd && tar xzf pocl-0.12.tar.gz && cd pocl-0.12/ && ./configure && make && sudo make install && popd; fi

