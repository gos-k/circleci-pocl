machine:
    environment:
        LISP: sbcl-bin
        PATH: ~/.roswell/bin:$PATH
        CC: clang-3.7
        CXX: clang++-3.7

checkout:
    pre:
        - curl -L https://raw.githubusercontent.com/snmsts/roswell/master/scripts/install-for-ci.sh | sh

dependencies:
    pre:
        - sudo bash -c 'echo "deb http://mirrors.kernel.org/ubuntu wily main universe" >> /etc/apt/sources.list'
        - sudo apt-get update
        - sudo apt-get install -y pkg-config libltdl3-dev libhwloc-dev llvm-3.7-dev clang-3.7 libclang-3.7-dev ocl-icd-opencl-dev libedit-dev
        - sudo apt-get purge llvm llvm-3.6
        - wget http://portablecl.org/downloads/pocl-0.13.tar.gz
        - tar xzf pocl-0.13.tar.gz && cd pocl-0.13/ && ./configure && make && sudo make install

